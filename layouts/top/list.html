{{ define "main" }}
<div class="page-container {{ .Type }}">
    {{ $metaTypes := .Site.Params.Meta.TopList }}
    {{ $limit := .Site.Params.Meta.TopListCount }}

    <div class="container">
    	<div class="row">
		    {{ range $index, $metaType := $metaTypes }}
		    	{{ $metaPage := $.Site.GetPage (printf "%s" $metaType)}}
		    	{{ if not $metaPage }}
		    		{{ errorf "review meta type %s is unknown"}}
		    	{{ end }}
		    	{{ $reviews := (where $.Site.RegularPages "Type" "in" "reviews") }}
				{{ $reviews = (where $reviews ".Params.meta_type" "==" $metaType) }}
				{{ $reviews = ($reviews.ByParam "score").Reverse }}

				{{ if $reviews }}
			    	<div class="col-md">
					<h3 class="page-heading">Top {{ $limit }} {{ $metaPage.Title }}</h3>
					{{ partial "top-table.html" (dict "context" $ "arr" $reviews) }}
			    	</div>
				{{ end }}
		    {{ end }}
        </div>
    </div>
</div>
{{ end }}
